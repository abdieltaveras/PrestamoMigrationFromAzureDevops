@inherits BaseForCreateOrEdit
@*Esto va en un dialogo*@


<MudText Typo="Typo.h5">Componentes De La Division Territorial</MudText>

@if (!ComponentesDivision.Any())
{
    <MudText Typo="Typo.h4" Align="Align.Center">Cargando datos</MudText>
}
else
{
    <MudText Typo="Typo.h5" Color="MudBlazor.Color.Warning">@DivisionTerritorialName</MudText>
    <MudForm Class="pa-6 ma-1">
 @*        @if (ComponentesDivision.Count() == 1)
        {
            <MudTextField Value="NewTerritorio.Nombre" Required="true" RequiredError="Es obligatorio llenar este campo" Label="Nombre del componente" HelperText="Sugerencias: Pais, Estado, Provincia, Municipio, etc" />
            <MudSwitch @bind-Checked="NewTerritorio.Activo"></MudSwitch>
        }
        else
        { *@
            <MudPaper Width="350px" MaxHeight="500px" Class="overflow-y-auto" Elevation="0">

                
                
                <MudText Typo="@Typo.subtitle1"> Componente Seleccionado: @SelectedValue </MudText>
            @if (!isLoadingTree)
            {
                <MudTreeView T="ITreeItemData" Items="TreeItems" Hover="true" Color="MudBlazor.Color.Info">
                    <ItemTemplate>
                        <MudTreeViewItem @bind-Expanded="@context.IsExpanded" Items="@context.TreeItems">
                            <Content>
                                @* <MudText @onclick="()=> OnClickItem(context.IdTreeItem, context.Text)">+</MudText> *@

                                <MudIconButton Icon="@Icons.Material.Filled.AddCircle" Title="Add" @onclick="()=> OnClickAdd(context.IdTreeItem, context.Text)" />
                                @if (!context.HasChild)
                                {
                                    <MudIconButton Icon="@Icons.Material.Filled.RemoveCircle" Title="Remove" Color="MudBlazor.Color.Error" @onclick="()=> OnClickDelete(context.IdTreeItem, context.Text)" />
                                }
                                @* <MudIcon Icon="@Icons.Material.Filled.AddCircle" Title="Add" @onclick="()=> OnClickAdd(context.IdTreeItem, context.Text)" /> *@
                                <MudText>@context.Text</MudText>

                                <MudTreeViewItemToggleButton @bind-Expanded="@context.IsExpanded" Visible="@context.HasChild" />

                            </Content>
                        </MudTreeViewItem>
                    </ItemTemplate>
                </MudTreeView>
            }

                </MudPaper>
        @* } *@
        @* <MudButton OnClick="Guardar" Color="MudBlazor.Color.Info">Guardar</MudButton> *@
        <MudButton OnClick="Cancelar" Color="MudBlazor.Color.Dark">Cancelar</MudButton>
    </MudForm>
}