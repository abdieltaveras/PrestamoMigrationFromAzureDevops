@page "/clientes/CreateOrEdit"
@page "/clientes/CreateOrEdit/{idCliente:int}"
@*@using PrestamoBLL.Entidades;*@
    @*@using PrestamoBlazorApp.Shared;*@
@*@using PrestamoBlazorApp.Pages.Clientes;
    @using Microsoft.AspNetCore.WebUtilities*@
@*@inject NavigationManager NavigationManager*@


@inherits BaseForCreateOrEdit
<div class="grid-container">

    <EditForm Model="@cliente" OnValidSubmit="@SaveCliente">
        <DataAnnotationsValidator />
        <ValidationSummary />

        <div class="bg-secondary">
            <h3 class="text-left">Crear o Editar clientes</h3>
            <div class="text-right">
                <button id="btnGuardar" type="submit">Guardar</button>
                @*<button id="btnsh" type="button" onclick="() =>$('#btnsh').prop('disabled',true)>show hide</button>*@
            </div>
        </div>

        @if (loading)
        {
            <div class="loader">Cargando...</div>
        }
        <RadzenTabs style="height: 880px">
            <Tabs>
                <RadzenTabsItem Text="Generales" @onclick="SetMask">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group row">
                                <label for="codigo" class="col-sm-2 col-form-label text-right">Codigo</label>
                                @if (disableCodigo)
                                {
                                    <label class="col-sm-3 mt-2">@cliente.Codigo </label>
                                }
                                else
                                {
                                    <InputText @bind-Value="cliente.Codigo" class="col-sm-3" />
                                }
                                <label class="col-sm-2 col-form-label text-right">Activo</label>
                                <label class="col-sm-1 col-form-label text-left">@TextoForActivo</label>
                            </div>
                            <div class="form-group row">
                                <label for="tiposIdentificacionPersonas" class="col-sm-3 col-form-label text-right"> Tipo Identif</label>
                                <InputSelect id="tiposIdentificacion" @bind-Value="cliente.IdTipoIdentificacion" class="form-control col-sm-4">
                                    @foreach (var item in EnumToList.GetEnumTiposIdentificacionPersona())
                                    {
                                        <option value=@item.Value>@item.Text</option>
                                    }
                                </InputSelect>
                                <label for="noIdentificacion" class="col-sm-2 col-form-label text-right">Numeracion </label>
                                @if (cliente.IdTipoIdentificacion == (int)TiposIdentificacionPersona.Cedula)
                                {
                                    <InputText id="noIdentificacion" placeholder="000-0000000-0" @bind-Value="cliente.NoIdentificacion" data-inputmask="'mask': '999-9999999-9'" class="col-sm-3 masked" />
                                }
                                else
                                {
                                    <InputText id="noIdentificacion"  @bind-Value="cliente.NoIdentificacion"  class="col-sm-3" />
                                }
                            </div>
                            <div class="form-group row">
                                <label for="nombres" class="col-sm-2 col-form-label text-right">Nombres</label>
                                <InputText @bind-Value="cliente.Nombres" class="col-sm-10" />

                            </div>
                            <div class="form-group row">
                                <label for="apellidos" class="col-sm-2 col-form-label text-right">Apellidos</label>
                                <InputText @bind-Value="cliente.Apellidos" class="col-sm-10" />
                            </div>
                            <div class="form-group row">
                                <label for="apodo" class="col-sm-2 col-form-label text-right">Apodo</label>
                                <InputText @bind-Value="cliente.Apodo" class="col-sm-10" />
                            </div>

                            <div class="form-group row">
                                <label for="tiposEstadosCiviles" class="col-sm-2 col-form-label text-right">Estado Civil</label>
                                <InputSelect id="tiposEstadosCiviles" @bind-Value="cliente.IdEstadoCivil" class="form-control col-sm-4">
                                    @foreach (var item in EnumToList.GetEnumEstadosCiviles())
                                    {
                                        <option value=@item.Value>@item.Text</option>
                                    }
                                </InputSelect>
                            </div>

                            <div class="form-group row">

                                <InputCheckbox id="tieneConyuge" @bind-Value=cliente.TieneConyuge TValue="bool" class="offset-2 mt-1" />
                                <label for="tieneConyuge" class="ml-2" style="margin-left: 5px">Tiene Conyuge o Pareja</label>
                            </div>
                            <div class="form-group row">
                                <label for="sexos" class="col-sm-2 col-form-label text-right">Sexo</label>
                                <InputSelect id="sexos" @bind-Value="cliente.idSexo" class="form-control col-sm-4">
                                    <option value="1">Masculino</option>
                                    <option value="2">Femenino</option>
                                </InputSelect>
                            </div>
                            <div class="form-group row">
                                <label for="fechaDeNacimiento" class="col-sm-2 col-form-label text-right">Fecha de Nacimiento</label>
                                <InputDate @bind-Value="cliente.FechaNacimiento" class="col-sm-10" />
                            </div>
                        </div>

                        <div class="col-sm-6">
                            <div class="form-group row mt-5">
                                <label class="col-sm-3 col-form-label text-right">Telefono Casa</label>
                                <InputText placeholder="(000)-000-0000" @bind-Value="cliente.TelefonoCasa " data-inputmask="'mask': '(999)-999-9999'" class="col-sm-3 masked" />

                            </div>
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label text-right">Telefono movil</label>
                                <InputText placeholder="(000)-000-0000" @bind-Value="cliente.TelefonoMovil " data-inputmask="'mask': '(999)-999-9999'" class="col-sm-3 masked" />
                            </div>
                            <div class="form-group row">
                                <label class="col-sm-3 col-form-label text-right">Profesion</label>
                                <InputSelect id="Ocupaciones" @bind-Value="cliente.IdTipoProfesionUOcupacion" class="form-control col-sm-4">
                                    @foreach (var item in Ocupaciones)
                                    {
                                        <option value=@item.IdOcupacion>@item.Nombre</option>
                                    }
                                </InputSelect>
                            </div>

                            <div class="ml-5">
                                @*<InputImages OnImageSet="SetImages" ImageQty="2" Text="Seleccione las imagenes para el cliente"></InputImages>*@
                                @{ var tGrupo = TiposFotosCliente.RostroCliente.ToString(); }
                                <InputImages2 @key="1" OnImageSet="SetImages " OnImageRemove="RemoveImages" ListaImagenes="this.FotosRostroCliente" GrupoImagen="@tGrupo" ImageQty="1" Text="Imagen Rostro Del Cliente"></InputImages2>
                            </div>

                            <div class="ml-5">
                                @*<InputImages OnImageSet="SetImages" ImageQty="2" Text="Seleccione las imagenes para el cliente"></InputImages>*@
                                @{ var tGrp = TiposFotosCliente.DocIdentificacion.ToString(); }
                                <InputImages2 @key="1" OnImageSet="SetImages " OnImageRemove="RemoveImages" ListaImagenes="this.FotosDocIdentificacion" GrupoImagen="@tGrp" ImageQty="2" Text="Imagenes Documento de Identificacion"></InputImages2>
                            </div>
                        </div>

                    </div>
                    @*<div class="col-xl-6">
                            <EventConsole @ref=@console />
                        </div>*@

                </RadzenTabsItem>
                @if (cliente.TieneConyuge || cliente.IdEstadoCivil == (int)EstadosCiviles.Casado)
                {
                    <RadzenTabsItem Text="conyuge">
                        <ConyugeUI conyuge=@conyuge></ConyugeUI>
                    </RadzenTabsItem>
                }
                <RadzenTabsItem Text="Direccion">
                    <DireccionUI direccion=@direccion cliente=@cliente />
                </RadzenTabsItem>
                <RadzenTabsItem Text="Laborales">
                    <LaboralUI infoLaboral=@infoLaboral />
                </RadzenTabsItem>
                <RadzenTabsItem Text="Referencias">
                    @for (int i = 0; i < referencias.Count; i++)
                    {
                        <InputReferencia referencia=@referencias[i] Index=@i />
                    }
                </RadzenTabsItem>

            </Tabs>

        </RadzenTabs>

    </EditForm>
    @*<EventConsole @ref="@console"> </EventConsole>*@

</div>





