@page "/clientes"
@inherits BaseForList
@using PrestamoBlazorApp.Shared.Components.Reports

@using PrestamoBlazorApp.Shared.Components.Forms


<GeneralList CardTitle="Lista de Clientes" LinkAddButton="clientes/createoredit/" 
             OnSearchTextChange="searchClientesDatabase" 
             OptionItems="lstItemsToSearch" 
             OnOptionChange="SelectedOptionToSearch">
    <ActionsButtons>
        <MudIconButton Icon="@Icons.Filled.Print" OnClick="()=>ShowReportGenerator()"></MudIconButton>
    </ActionsButtons>
    <TableList>
        <MudTable Loading="LoadingTable" Items="@clientes" Dense="@Dense" Hover="@Hover" Bordered="@Bordered" Striped="@Striped" Filter="new Func<Cliente,bool>(FilterFunc1)" @bind-SelectedItem="SelectedItem1">
            <ToolBarContent>
                <MudText Typo="Typo.h6">Elementos</MudText>
                <MudTextField Immediate="true" @bind-Value="SearchStringTable" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
                <MudDivider FlexItem="true" Vertical="true" DividerType="DividerType.Middle" Class="ml-1 mr-1 my-1"></MudDivider>
            </ToolBarContent>
            <HeaderContent>
                <MudTh>Codigo</MudTh>
                <MudTh>Nombre</MudTh>
                <MudTh>Telefono</MudTh>
                <MudTh>Tipo Identificacion</MudTh>
                <MudTh>Identificacion</MudTh>
                <MudTh>Acciones</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Codigo">@context.Codigo</MudTd>
                <MudTd DataLabel="Nombre">@context.NombreCompleto</MudTd>
                <MudTd DataLabel="Nombre">@context.TelefonoMovil </MudTd>
                @{
                    var tident = (TiposIdentificacionPersona)context.IdTipoIdentificacion;
                    <MudTh> @tident</MudTh>
                }
                <MudTd DataLabel="Nombre">@context.NoIdentificacion</MudTd>

                <MudTd>
                    <MudIconButton OnClick='()=>OnEditClick("clientes/createoredit/" + context.IdCliente.ToString())' Icon="@Icons.Outlined.Edit"></MudIconButton>
                    <MudMenu Icon="@Icons.Filled.Print">
                        <MudMenuItem OnClick="()=>PrintFicha(context.IdCliente,1)">PDF</MudMenuItem>
                        <MudMenuItem OnClick="()=>PrintFicha(context.IdCliente,1)">EXCEL</MudMenuItem>
                    </MudMenu>
                </MudTd>
            </RowTemplate>
            <PagerContent>
                <MudTablePager />
            </PagerContent>
        </MudTable>
    </TableList>
</GeneralList>
