@page "/asignarestatus"
@using PrestamoBlazorApp.Shared.Components.EntidadEstatus 
@inherits BaseForCreateOrEdit
<MudCard>
    <MudCardContent>
        <MudGrid>
            <MudItem md="3" lg="3">
                <MudSelect @bind-Value="@TipoBusqueda" Label="@($"Buscar {TipoBusquedaStr} por ID")">
                    <MudSelectItem Value="-1" Disabled="true">Seleccionar un tipo de busqueda</MudSelectItem>
                    <MudSelectItem Value="1">Cliente</MudSelectItem>
                    <MudSelectItem Value="2">Prestamo</MudSelectItem>
                </MudSelect>
            </MudItem>
            <MudItem md="5" lg="5">
                <MudNumericField  T="int" @bind-Value="@Id" Label="@($"Buscar {TipoBusquedaStr} por ID")" Variant="Variant.Text" />
                @if (TipoBusqueda == eTipoStatus.Cliente)
                {
                    if (ClienteSelected.IdCliente > 0)
                    {
                        <MudChip>@ClienteSelected.NombreCompleto</MudChip>
                    }
                    else
                    {
                        <MudChip>@TipoBusquedaStr sin seleccionar</MudChip>
                    }
                }
                else
                {
                    @if (TipoBusqueda == eTipoStatus.Prestamos)
                    {
                        if (PrestamoSelected.IdPrestamo > 0)
                        {
                            <MudChip>@PrestamoSelected.IdPrestamo | @PrestamoSelected.PrestamoNumero</MudChip>
                        }
                        else
                        {
                            <MudChip>@TipoBusquedaStr sin seleccionar</MudChip>

                        }
                    }
                    else
                    {
                        <MudChip>@TipoBusquedaStr sin seleccionar</MudChip>

                    }
                }
            </MudItem>
            <MudItem md="2" lg="2">
                <MudButton Style='@(TipoBusqueda>0 ? "display:block;":"display:none;")' ButtonType="ButtonType.Button"
                           OnClick="()=>GetData()" 
                           Color="MudBlazor.Color.Primary" 
                           Variant="Variant.Filled"> Buscar @TipoBusquedaStr</MudButton>
            </MudItem>
        </MudGrid>


    </MudCardContent>
</MudCard>

<MudCard>
    <MudCardHeader>
        <MudText>Estatus Asignado</MudText>
    </MudCardHeader>
    <MudCardContent>
        <MudGrid>
            <MudItem md="3" lg="3">
                <SearchEstatus OnSelectItem="EstatusSelected" />
            </MudItem>
            <MudItem md="2" lg="2">
                <MudButton OnClick="OnAsignarClick" Color="MudBlazor.Color.Primary" Variant="Variant.Filled"> Asignar</MudButton>
            </MudItem>
            <MudItem md="7" lg="7">
                @if (ClienteSelected.IdCliente > 0 || PrestamoSelected.IdPrestamo > 0)
                {
                     <ViewEstatusOfObject Id="@Id" TipoBusqueda="@TipoBusqueda"></ViewEstatusOfObject>
                }
            </MudItem>
        </MudGrid>
    </MudCardContent>
</MudCard>

@code {

}
