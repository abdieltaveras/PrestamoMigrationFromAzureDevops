
@model RoleVM



<div class="row">

    <div id="listContainer" class="col-md-12 col-sm-12 col-xs-12">

        @*<button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-lg" style="float:right;">Agregar modal</button>*@
        @*<button type="button" class="btn btn-primary" style="float:right;">Agregar<i class="fa fa-plus"></i></button>*@

        @using (Html.BeginForm("CreateOrEdit", "Roles", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "", role = "form" }))
        {

            <div id="rolename">
                <div class="col-5" style="margin: auto; padding: 0%; ">
                    <h4 style="text-align: center;">Nombre de role</h4>
                    <input class="target form-control" type="text" placeholder="Escriba el nombre del role aqui" name="Role.Role.Nombre" value="" style="height: 60px" />
                    <br />
                    <input class="target form-control" type="text" placeholder="Descripcion del role" required name="Role.Role.Descripcion" value="" />
                </div>

            </div>
            <br />



            @*<div class="ln_solid"></div>

            @*</form>*@

            <div class="x_panel">
                <div class="x_title">
                    <h2>Grupos de permisos</h2>

                    <div class="clearfix"></div>
                </div>
                @{
                    int grupo = 0;
                    int countElement = @Model.Operaciones.Count();
                    int counter = 0;
                }

                <div class="container md-10">
                    <div class="py-5">
                        <div class="row">
                            @foreach (var operacion in Model.Operaciones)
                            {

                                counter++;

                                if (grupo != operacion.Grupo)
                                {
                                    if (grupo != 0)
                                    {
                                        @Html.Raw("</div> </div> </div> </div>")
                                    }

                                    @Html.Raw("<div class=\"col-lg-6 mb-5\">")

                                    <a data-toggle="collapse" href="@Html.Raw("#collapseExample" + grupo)" role="button" aria-expanded="true" aria-controls="collapseExample1" class="btn btn-primary btn-block py-2 shadow-sm with-chevron">
                                        <p class="d-flex align-items-center justify-content-between mb-0 px-3 py-2"><strong class="text-uppercase">@Operacion.Grupos[operacion.Grupo - 1] <i id="@Html.Raw("check-grupo-" + (grupo+1))" class="fa fa-check check-group" style="display: none;"></i> </strong><i class="fa fa-angle-down"></i></p>
                                    </a>

                                    @Html.Raw(" <div id=\"collapseExample" + grupo + "\" class=\"collapse shadow-sm \"> <div class=\"card\"> <div class=\"card-body\">")

                                    <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                        <input type="checkbox" class="custom-control-input" name="Role.ListaOperaciones[]" id="@operacion.Codigo" value="@operacion.IdOperacion">
                                        <label class="custom-control-label" for="@operacion.Codigo">@operacion.Nombre</label>
                                        <br />
                                        <small>@operacion.Descripcion</small>
                                    </div>
                                    grupo = operacion.Grupo;
                                }
                                else
                                {
                                    <div class="custom-control custom-checkbox my-1 mr-sm-2">
                                        <input type="checkbox" class="custom-control-input" name="Role.ListaOperaciones[]" id="@operacion.Codigo" value="@operacion.IdOperacion">
                                        <label class="custom-control-label" for="@operacion.Codigo">@operacion.Nombre</label>
                                        <br />
                                        <small>@operacion.Descripcion</small>
                                    </div>
                                    if (countElement == counter)
                                    {
                                        @Html.Raw("</div> </div> </div> </div>")
                                    }
                                }
                            }
                        </div>
                    </div>
                </div>
            </div>


            <div class="item form-group" style="float: right;">
                <div class="col-md-6 col-sm-6 offset-md-3">
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </div>
        }
    </div>
</div>



